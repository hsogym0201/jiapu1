{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.for-each.js\";\nimport \"core-js/modules/esnext.iterator.map.js\";\nimport \"core-js/modules/esnext.iterator.reduce.js\";\nimport { defineComponent, onMounted } from \"vue\";\nimport * as echarts from \"echarts/core\";\nimport { use, registerMap } from \"echarts/core\";\nimport { MapChart } from \"echarts/charts\";\nimport { TooltipComponent } from \"echarts/components\";\nimport { CanvasRenderer } from \"echarts/renderers\";\nimport chinaMap from \"@/assets/china.json\"; // 中国地图数据\nimport newJsonData from \"@/assets/new.json\"; // 你的家谱数据\n\nuse([CanvasRenderer, MapChart, TooltipComponent]);\nexport default defineComponent({\n  name: \"ChinaMap\",\n  setup() {\n    onMounted(() => {\n      const chart = echarts.init(document.getElementById(\"china-map\"));\n\n      // 注册地图数据\n      registerMap(\"china\", chinaMap);\n\n      // 处理家谱数据，统计每个省份的姓氏出现次数\n      const provinceSurnameCount = newJsonData.reduce((acc, item) => {\n        const province = item.居地; // 假设居地字段是省份名称\n        if (!acc[province]) {\n          acc[province] = {};\n        }\n        const surname = item.姓氏;\n        if (!acc[province][surname]) {\n          acc[province][surname] = 0;\n        }\n        acc[province][surname]++;\n        return acc;\n      }, {});\n\n      // 配置地图\n      const option = {\n        tooltip: {\n          trigger: \"item\",\n          formatter: params => {\n            const province = params.name;\n            const surnames = provinceSurnameCount[province] || {};\n            let content = `${province}<br>`;\n            Object.keys(surnames).forEach(surname => {\n              content += `${surname}: ${surnames[surname]}次<br>`;\n            });\n            return content;\n          }\n        },\n        series: [{\n          name: \"中国地图\",\n          type: \"map\",\n          map: \"china\",\n          roam: true,\n          // 支持缩放和拖动\n          label: {\n            show: true,\n            // 显示省份名称\n            color: \"#000\",\n            // 名称字体颜色\n            fontSize: 12 // 名称字体大小\n          },\n          emphasis: {\n            label: {\n              show: true,\n              color: \"red\" // 点击后高亮显示文字颜色\n            },\n            itemStyle: {\n              areaColor: \"yellow\" // 点击后高亮区域颜色\n            }\n          },\n          data: Object.keys(provinceSurnameCount).map(province => ({\n            name: province,\n            value: Object.values(provinceSurnameCount[province]).reduce((sum, count) => sum + count, 0)\n          }))\n        }]\n      };\n      chart.setOption(option);\n\n      // 点击事件监听\n      chart.on(\"click\", params => {\n        alert(`你点击了 ${params.name}`);\n      });\n    });\n  }\n});","map":{"version":3,"names":["defineComponent","onMounted","echarts","use","registerMap","MapChart","TooltipComponent","CanvasRenderer","chinaMap","newJsonData","name","setup","chart","init","document","getElementById","provinceSurnameCount","reduce","acc","item","province","居地","surname","姓氏","option","tooltip","trigger","formatter","params","surnames","content","Object","keys","forEach","series","type","map","roam","label","show","color","fontSize","emphasis","itemStyle","areaColor","data","value","values","sum","count","setOption","on","alert"],"sources":["D:\\下载\\jiapudemo1\\src\\components\\DiTu2.vue"],"sourcesContent":["<!--<template>-->\r\n<!--  <div id=\"china-map\" style=\"width: 100%; height: 500px;\"></div>-->\r\n<!--</template>-->\r\n\r\n<!--<script>-->\r\n<!--import { defineComponent, onMounted } from \"vue\";-->\r\n<!--import * as echarts from \"echarts/core\";-->\r\n<!--import { use, registerMap } from \"echarts/core\";-->\r\n<!--import { MapChart } from \"echarts/charts\";-->\r\n<!--import { TooltipComponent } from \"echarts/components\";-->\r\n<!--import { CanvasRenderer } from \"echarts/renderers\";-->\r\n<!--import chinaMap from \"@/assets/china.json\"; // 确保路径正确-->\r\n\r\n<!--use([CanvasRenderer, MapChart, TooltipComponent]);-->\r\n\r\n<!--export default defineComponent({-->\r\n<!--  name: \"ChinaMap\",-->\r\n<!--  setup() {-->\r\n<!--    onMounted(() => {-->\r\n<!--      const chart = echarts.init(document.getElementById(\"china-map\"));-->\r\n\r\n<!--      // 注册地图数据-->\r\n<!--      registerMap(\"china\", chinaMap);-->\r\n\r\n<!--      // 配置地图-->\r\n<!--      const option = {-->\r\n<!--        tooltip: {-->\r\n<!--          trigger: \"item\",-->\r\n<!--          formatter: \"{b}\",-->\r\n<!--        },-->\r\n<!--        series: [-->\r\n<!--          {-->\r\n<!--            name: \"中国地图\",-->\r\n<!--            type: \"map\",-->\r\n<!--            map: \"china\",-->\r\n<!--            roam: true, // 支持缩放和拖动-->\r\n<!--            label: {-->\r\n<!--              show: true, // 显示省份名称-->\r\n<!--              color: \"#000\", // 名称字体颜色-->\r\n<!--              fontSize: 12, // 名称字体大小-->\r\n<!--            },-->\r\n<!--            emphasis: {-->\r\n<!--              label: {-->\r\n<!--                show: true,-->\r\n<!--                color: \"red\", // 点击后高亮显示文字颜色-->\r\n<!--              },-->\r\n<!--              itemStyle: {-->\r\n<!--                areaColor: \"yellow\", // 点击后高亮区域颜色-->\r\n<!--              },-->\r\n<!--            },-->\r\n<!--            data: [-->\r\n<!--              { name: \"北京\", value: 100 },-->\r\n<!--              { name: \"上海\", value: 80 },-->\r\n<!--              { name: \"广东\", value: 60 },-->\r\n<!--            ],-->\r\n<!--          },-->\r\n<!--        ],-->\r\n<!--      };-->\r\n\r\n<!--      chart.setOption(option);-->\r\n\r\n<!--      // 点击事件监听-->\r\n<!--      chart.on(\"click\", (params) => {-->\r\n<!--        alert(`你点击了 ${params.name}`);-->\r\n<!--      });-->\r\n<!--    });-->\r\n<!--  },-->\r\n<!--});-->\r\n<!--</script>-->\r\n\r\n<!--&lt;!&ndash;<style scoped>&ndash;&gt;-->\r\n<!--&lt;!&ndash;#china-map {&ndash;&gt;-->\r\n<!--&lt;!&ndash;  border: 1px solid #ddd;&ndash;&gt;-->\r\n<!--&lt;!&ndash;  border-radius: 5px;&ndash;&gt;-->\r\n<!--&lt;!&ndash;}&ndash;&gt;-->\r\n<!--&lt;!&ndash;</style>&ndash;&gt;-->\r\n<template>\r\n  <div id=\"china-map\" style=\"width: 100%; height: 500px;\"></div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, onMounted } from \"vue\";\r\nimport * as echarts from \"echarts/core\";\r\nimport { use, registerMap } from \"echarts/core\";\r\nimport { MapChart } from \"echarts/charts\";\r\nimport { TooltipComponent } from \"echarts/components\";\r\nimport { CanvasRenderer } from \"echarts/renderers\";\r\nimport chinaMap from \"@/assets/china.json\"; // 中国地图数据\r\nimport newJsonData from \"@/assets/new.json\"; // 你的家谱数据\r\n\r\nuse([CanvasRenderer, MapChart, TooltipComponent]);\r\n\r\nexport default defineComponent({\r\n  name: \"ChinaMap\",\r\n  setup() {\r\n    onMounted(() => {\r\n      const chart = echarts.init(document.getElementById(\"china-map\"));\r\n\r\n      // 注册地图数据\r\n      registerMap(\"china\", chinaMap);\r\n\r\n      // 处理家谱数据，统计每个省份的姓氏出现次数\r\n      const provinceSurnameCount = newJsonData.reduce((acc, item) => {\r\n        const province = item.居地; // 假设居地字段是省份名称\r\n        if (!acc[province]) {\r\n          acc[province] = {};\r\n        }\r\n        const surname = item.姓氏;\r\n        if (!acc[province][surname]) {\r\n          acc[province][surname] = 0;\r\n        }\r\n        acc[province][surname]++;\r\n        return acc;\r\n      }, {});\r\n\r\n      // 配置地图\r\n      const option = {\r\n        tooltip: {\r\n          trigger: \"item\",\r\n          formatter: (params) => {\r\n            const province = params.name;\r\n            const surnames = provinceSurnameCount[province] || {};\r\n            let content = `${province}<br>`;\r\n            Object.keys(surnames).forEach(surname => {\r\n              content += `${surname}: ${surnames[surname]}次<br>`;\r\n            });\r\n            return content;\r\n          },\r\n        },\r\n        series: [\r\n          {\r\n            name: \"中国地图\",\r\n            type: \"map\",\r\n            map: \"china\",\r\n            roam: true, // 支持缩放和拖动\r\n            label: {\r\n              show: true, // 显示省份名称\r\n              color: \"#000\", // 名称字体颜色\r\n              fontSize: 12, // 名称字体大小\r\n            },\r\n            emphasis: {\r\n              label: {\r\n                show: true,\r\n                color: \"red\", // 点击后高亮显示文字颜色\r\n              },\r\n              itemStyle: {\r\n                areaColor: \"yellow\", // 点击后高亮区域颜色\r\n              },\r\n            },\r\n            data: Object.keys(provinceSurnameCount).map(province => ({\r\n              name: province,\r\n              value: Object.values(provinceSurnameCount[province]).reduce((sum, count) => sum + count, 0),\r\n            })),\r\n          },\r\n        ],\r\n      };\r\n\r\n      chart.setOption(option);\r\n\r\n      // 点击事件监听\r\n      chart.on(\"click\", (params) => {\r\n        alert(`你点击了 ${params.name}`);\r\n      });\r\n    });\r\n  },\r\n});\r\n</script>\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}