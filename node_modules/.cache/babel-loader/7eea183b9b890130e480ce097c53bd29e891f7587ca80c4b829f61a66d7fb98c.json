{"ast":null,"code":"import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  id: \"china-map\",\n  style: {\n    \"width\": \"100%\",\n    \"height\": \"500px\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1);\n}","map":{"version":3,"names":["id","style","_createElementBlock","_hoisted_1"],"sources":["D:\\下载\\jiapudemo1\\src\\components\\DiTu2.vue"],"sourcesContent":["<!--<template>-->\r\n<!--  <div id=\"china-map\" style=\"width: 100%; height: 500px;\"></div>-->\r\n<!--</template>-->\r\n\r\n<!--<script>-->\r\n<!--import { defineComponent, onMounted } from \"vue\";-->\r\n<!--import * as echarts from \"echarts/core\";-->\r\n<!--import { use, registerMap } from \"echarts/core\";-->\r\n<!--import { MapChart } from \"echarts/charts\";-->\r\n<!--import { TooltipComponent } from \"echarts/components\";-->\r\n<!--import { CanvasRenderer } from \"echarts/renderers\";-->\r\n<!--import chinaMap from \"@/assets/china.json\"; // 确保路径正确-->\r\n\r\n<!--use([CanvasRenderer, MapChart, TooltipComponent]);-->\r\n\r\n<!--export default defineComponent({-->\r\n<!--  name: \"ChinaMap\",-->\r\n<!--  setup() {-->\r\n<!--    onMounted(() => {-->\r\n<!--      const chart = echarts.init(document.getElementById(\"china-map\"));-->\r\n\r\n<!--      // 注册地图数据-->\r\n<!--      registerMap(\"china\", chinaMap);-->\r\n\r\n<!--      // 配置地图-->\r\n<!--      const option = {-->\r\n<!--        tooltip: {-->\r\n<!--          trigger: \"item\",-->\r\n<!--          formatter: \"{b}\",-->\r\n<!--        },-->\r\n<!--        series: [-->\r\n<!--          {-->\r\n<!--            name: \"中国地图\",-->\r\n<!--            type: \"map\",-->\r\n<!--            map: \"china\",-->\r\n<!--            roam: true, // 支持缩放和拖动-->\r\n<!--            label: {-->\r\n<!--              show: true, // 显示省份名称-->\r\n<!--              color: \"#000\", // 名称字体颜色-->\r\n<!--              fontSize: 12, // 名称字体大小-->\r\n<!--            },-->\r\n<!--            emphasis: {-->\r\n<!--              label: {-->\r\n<!--                show: true,-->\r\n<!--                color: \"red\", // 点击后高亮显示文字颜色-->\r\n<!--              },-->\r\n<!--              itemStyle: {-->\r\n<!--                areaColor: \"yellow\", // 点击后高亮区域颜色-->\r\n<!--              },-->\r\n<!--            },-->\r\n<!--            data: [-->\r\n<!--              { name: \"北京\", value: 100 },-->\r\n<!--              { name: \"上海\", value: 80 },-->\r\n<!--              { name: \"广东\", value: 60 },-->\r\n<!--            ],-->\r\n<!--          },-->\r\n<!--        ],-->\r\n<!--      };-->\r\n\r\n<!--      chart.setOption(option);-->\r\n\r\n<!--      // 点击事件监听-->\r\n<!--      chart.on(\"click\", (params) => {-->\r\n<!--        alert(`你点击了 ${params.name}`);-->\r\n<!--      });-->\r\n<!--    });-->\r\n<!--  },-->\r\n<!--});-->\r\n<!--</script>-->\r\n\r\n<!--&lt;!&ndash;<style scoped>&ndash;&gt;-->\r\n<!--&lt;!&ndash;#china-map {&ndash;&gt;-->\r\n<!--&lt;!&ndash;  border: 1px solid #ddd;&ndash;&gt;-->\r\n<!--&lt;!&ndash;  border-radius: 5px;&ndash;&gt;-->\r\n<!--&lt;!&ndash;}&ndash;&gt;-->\r\n<!--&lt;!&ndash;</style>&ndash;&gt;-->\r\n<template>\r\n  <div id=\"china-map\" style=\"width: 100%; height: 500px;\"></div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, onMounted } from \"vue\";\r\nimport * as echarts from \"echarts/core\";\r\nimport { use, registerMap } from \"echarts/core\";\r\nimport { MapChart } from \"echarts/charts\";\r\nimport { TooltipComponent } from \"echarts/components\";\r\nimport { CanvasRenderer } from \"echarts/renderers\";\r\nimport chinaMap from \"@/assets/china.json\"; // 中国地图数据\r\nimport newJsonData from \"@/assets/new.json\"; // 你的家谱数据\r\n\r\nuse([CanvasRenderer, MapChart, TooltipComponent]);\r\n\r\nexport default defineComponent({\r\n  name: \"ChinaMap\",\r\n  setup() {\r\n    onMounted(() => {\r\n      const chart = echarts.init(document.getElementById(\"china-map\"));\r\n\r\n      // 注册地图数据\r\n      registerMap(\"china\", chinaMap);\r\n\r\n      // 处理家谱数据，统计每个省份的姓氏出现次数\r\n      const provinceSurnameCount = newJsonData.reduce((acc, item) => {\r\n        const province = item.居地; // 假设居地字段是省份名称\r\n        if (!acc[province]) {\r\n          acc[province] = {};\r\n        }\r\n        const surname = item.姓氏;\r\n        if (!acc[province][surname]) {\r\n          acc[province][surname] = 0;\r\n        }\r\n        acc[province][surname]++;\r\n        return acc;\r\n      }, {});\r\n\r\n      // 配置地图\r\n      const option = {\r\n        tooltip: {\r\n          trigger: \"item\",\r\n          formatter: (params) => {\r\n            const province = params.name;\r\n            const surnames = provinceSurnameCount[province] || {};\r\n            let content = `${province}<br>`;\r\n            Object.keys(surnames).forEach(surname => {\r\n              content += `${surname}: ${surnames[surname]}次<br>`;\r\n            });\r\n            return content;\r\n          },\r\n        },\r\n        series: [\r\n          {\r\n            name: \"中国地图\",\r\n            type: \"map\",\r\n            map: \"china\",\r\n            roam: true, // 支持缩放和拖动\r\n            label: {\r\n              show: true, // 显示省份名称\r\n              color: \"#000\", // 名称字体颜色\r\n              fontSize: 12, // 名称字体大小\r\n            },\r\n            emphasis: {\r\n              label: {\r\n                show: true,\r\n                color: \"red\", // 点击后高亮显示文字颜色\r\n              },\r\n              itemStyle: {\r\n                areaColor: \"yellow\", // 点击后高亮区域颜色\r\n              },\r\n            },\r\n            data: Object.keys(provinceSurnameCount).map(province => ({\r\n              name: province,\r\n              value: Object.values(provinceSurnameCount[province]).reduce((sum, count) => sum + count, 0),\r\n            })),\r\n          },\r\n        ],\r\n      };\r\n\r\n      chart.setOption(option);\r\n\r\n      // 点击事件监听\r\n      chart.on(\"click\", (params) => {\r\n        alert(`你点击了 ${params.name}`);\r\n      });\r\n    });\r\n  },\r\n});\r\n</script>\r\n\r\n\r\n"],"mappings":";;EA6EOA,EAAE,EAAC,WAAW;EAACC,KAAmC,EAAnC;IAAA;IAAA;EAAA;;;uBAApBC,mBAAA,CAA8D,OAA9DC,UAA8D","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}